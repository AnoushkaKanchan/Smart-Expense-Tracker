<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Expense Tracker â€” Level 3</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="app-container my-5">

  <!-- HEADER -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="fw-bold mb-0">Smart Expense Tracker</h1>
    <input type="month" id="month-selector" class="form-control w-auto">
  </div>

  <!-- REPORTS & EXPORT -->
  <div class="d-flex justify-content-end mb-4">
    <div class="btn-group">
      <button class="btn btn-outline-primary" onclick="exportCategoryReport()">
        <i class="bi bi-pie-chart-fill"></i>
      </button>
      <button class="btn btn-outline-secondary" onclick="exportTransactionReport()">
        <i class="bi bi-receipt-cutoff"></i>
      </button>
    </div>
  </div>

  <!-- PLANNING -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h5 class="card-title mb-3">Planning</h5>

      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Monthly Income</label>
          <input type="number" id="income-input" class="form-control">
        </div>

        <div class="col-md-6">
          <label class="form-label">Monthly Budget</label>
          <input type="number" id="budget-input" class="form-control">
        </div>
      </div>
    </div>
  </div>

  <!-- DASHBOARD -->
  <div class="row g-3 mb-4">
    <div class="col-md-3">
      <div class="card text-center">
        <div class="card-body">
          <small class="text-muted">Income</small>
          <h4 id="dash-income">â€”</h4>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-center">
        <div class="card-body">
          <small class="text-muted">Expenses</small>
          <h4 id="dash-expenses">â€”</h4>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-center">
        <div class="card-body">
          <small class="text-muted">Remaining</small>
          <h4 id="dash-remaining">â€”</h4>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-center">
        <div class="card-body">
          <small class="text-muted">Budget Left</small>
          <h4 id="dash-budget-remaining">â€”</h4>
        </div>
      </div>
    </div>
  </div>

  <!-- BUDGET PROGRESS -->
  <div class="mb-4">
    <label class="form-label">Budget Usage</label>
    <div class="progress">
      <div id="budget-progress" class="progress-bar" style="width: 0%"></div>
    </div>
    <small id="budget-usage-text" class="text-muted"></small>
  </div>

  
  <!-- CATEGORY PIE -->
  <div class="card mb-4">
   <div class="card-body text-center">
     <h6 class="mb-3">Spending by Category</h6>

     <!-- ðŸ”’ FIXED WRAPPER (THIS STOPS GROWTH) -->
      <div class="chart-wrapper mx-auto">
       <canvas id="categoryPie"></canvas>
      </div>

      <div id="categoryPieEmpty" class="text-muted small mt-2"></div>
    </div>
  </div>


  <!-- ALERTS -->
  <div class="card mb-4">
    <div class="card-body">
      <h6>Alerts</h6>
      <div id="alerts-list" class="d-grid gap-2" ></div>
      
    </div>
  </div>


  <!-- INSIGHTS -->
  <div class="card mb-4">
    <div class="card-body">
      <h6>Key Insight</h6>
      <div id="dash-insight" class="text-muted"></div>
    </div>
  </div>

  <!-- SAVINGS -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h5>Savings</h5>
        <div class="form-check form-switch">
          <input class="form-check-input" type="checkbox" id="savings-mode-toggle">
          <label class="form-check-label">Flexible saving</label>
        </div>
      </div>

      <p id="savings-mode-help" class="text-muted small"></p>
      <div class="fw-semibold">
        Available to save this month:
        <span id="savings-capacity"></span>
      </div>
      <p id="savings-capacity-explain" class="text-muted small"></p>
    </div>
  </div>

  <!-- GOALS -->
  <form id="goal-form" class="row g-2 mb-3">
    <div class="col-md-4">
      <input type="text" id="goal-name" class="form-control" placeholder="Goal name" required>
    </div>
    <div class="col-md-3">
      <input type="number" id="goal-target" class="form-control" placeholder="Target amount" required>
    </div>
    <div class="col-md-3">
      <input type="month" id="goal-target-month" class="form-control">
    </div>
    <div class="col-md-2">
      <button class="btn btn-outline-primary w-100">Add Goal</button>
    </div>
  </form>

  <ul id="goals-list" class="list-group mb-4"></ul>

  <!-- EXPENSE FORM -->
  <div class="card mb-4">
    <div class="card-body">
      <h5>Add / Edit Expense</h5>
      <form id="expense-form" class="row g-3">
        <div class="col-md-4">
          <input type="number" id="amount" class="form-control" placeholder="Amount" required>
        </div>
        <div class="col-md-4">
          <select id="category" class="form-select" required>
            <option value="">Category</option>
            <option>Food</option>
            <option>Travel</option>
            <option>Rent</option>
            <option>Shopping</option>
            <option>Entertainment</option>
            <option>Education</option>
            <option>Misc</option>
          </select>
        </div>
        <div class="col-md-4">
          <input type="date" id="date" class="form-control">
        </div>
        <div class="col-12">
          <input type="text" id="note" class="form-control" placeholder="Optional note">
        </div>
        <div class="col-12">
          <button class="btn btn-primary w-100">Save Expense</button>
        </div>
      </form>
    </div>
  </div>

  <!-- EXPENSE LIST -->
  <div class="card">
    <div class="card-body">
      <h5>Expenses</h5>
      <ul id="expense-list" class="list-group"></ul>
    </div>
  </div>

  <!-- CLEAR ALL DATA -->
  <div class="d-flex justify-content-start mt-5">
   <button
     id="clear-all-btn"
     class="btn btn-outline-danger btn-sm">
     <i class="bi bi-trash3 me-1"></i>
     Clear all data
    </button>
  </div>
    
  <p></p>
  
  <button
   id="clear-month-btn"
   class="btn btn-outline-warning btn-sm me-2">
   <i class="bi bi-calendar-x me-1"></i>
   Clear this month
  </button>
  
</div>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="script.js"></script>

</body>
</html>
